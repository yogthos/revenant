{
  "llm": {
    "provider": {
      "writer": "mlx",
      "critic": "deepseek",
      "rtt": "mlx_rtt"
    },
    "providers": {
      "deepseek": {
        "api_key": "${DEEPSEEK_API_KEY}",
        "base_url": "https://api.deepseek.com",
        "model": "deepseek-chat",
        "max_tokens": 4096,
        "temperature": 0.7,
        "timeout": 120
      },
      "ollama": {
        "base_url": "http://localhost:11434",
        "model": "llama3",
        "max_tokens": 4096,
        "temperature": 0.7
      },
      "mlx": {
        "model": "./models/Qwen2.5-14B-Base-4bit-MLX",
        "max_tokens": 1024,
        "temperature": 0.5,
        "top_p": 0.9
      },
      "mlx_rtt": {
        "model": "mlx-community/Qwen2.5-3B-Instruct-4bit",
        "max_tokens": 512,
        "temperature": 0.1,
        "top_p": 0.9
      },
      "deepseek_rtt": {
        "model": "deepseek-chat",
        "max_tokens": 8192,
        "temperature": 0.1,
        "batch_size": 10,
        "concurrent_batches": 8,
        "timeout": 180
      }
    },
    "retry": {
      "max_attempts": 5,
      "base_delay": 2,
      "max_delay": 60
    }
  },
  "generation": {
    "_comment": "Meaning preservation",
    "entailment_threshold": 0.95,
    "max_repair_attempts": 5,
    "_comment3": "Length control (target_expansion_ratio: 1.5 = 50% longer output for author flourish)",
    "max_expansion_ratio": 2.5,
    "target_expansion_ratio": 1.5,
    "_comment4": "LoRA adapters: value can be scale (number) or {scale, checkpoint} object",
    "lora_adapters": {
      "lora_adapters/lovecraft_14b": {"scale": 1.0}
    },
    "_comment5": "Neutralization (skip for better fact preservation)",
    "skip_neutralization": false,
    "_comment6": "Post-processing",
    "repetition_threshold": 3,
    "reduce_repetition": true,
    "_comment6a": "Sentence restructuring (convert balanced patterns to organic)",
    "restructure_sentences": false,
    "_comment6b": "Sentence splitting (break run-on sentences at conjunction points)",
    "split_sentences": true,
    "max_sentence_length": 60,
    "sentence_length_variance": 0.3,
    "_comment6c": "Grammar correction (style-safe, preserves author voice)",
    "correct_grammar": true,
    "grammar_language": "en-US",
    "_comment7": "Document handling",
    "use_document_context": true,
    "pass_headings_unchanged": true,
    "min_paragraph_words": 10,
    "_comment8": "RAG settings",
    "use_structural_rag": true,
    "use_structural_grafting": true,
    "_comment9": "Persona settings (subjective voice to defeat AI detection)",
    "use_persona": true
  },
  "style": {
    "_comment": "Perspective controls output point-of-view",
    "_options": "preserve | first_person_singular | first_person_plural | third_person | author_voice_third_person",
    "perspective": "preserve"
  },
  "validation": {
    "_comment": "Proposition-based semantic validation settings (all values 0-1)",
    "proposition_match_threshold": 0.4,
    "novelty_threshold": 0.5,
    "coverage_threshold": 0.85,
    "grounding_threshold": 0.4,
    "candidates_per_repair": 2,
    "max_hallucinations_before_reject": 2,
    "max_repair_iterations": 2,
    "_comment2": "Lower iterations = less repetition, higher = better coverage",
    "_comment3": "max_hallucinations_before_reject: reduced from 4 to 2 for stricter validation"
  },
  "log_level": "INFO"
}